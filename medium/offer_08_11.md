# 面试题 08.11. 硬币

硬币。给定数量不限的硬币，币值为25分、10分、5分和1分，编写代码计算n分有几种表示法。(结果可能会很大，你需要将结果模上1000000007)

**示例1：**  
>**输入:** n = 5  
>**输出:** 2  
>**解释:**  有两种方式可以凑成总金额:  
>5=5  
>5=1+1+1+1+1

**示例2：**
>**输入:** n = 10  
>**输出:** 4  
>**解释:**  有四种方式可以凑成总金额:  
>10=10  
>10=5+5  
>10=5+1+1+1+1+1  
>10=1+1+1+1+1+1+1+1+1+1  

---
**解法一：动态规划**  
思路：  

1. 令 `dp[i][j]` 为遍历到当下这个硬币时，组成金额 j 的方法数目
2. 有两种可能性  
    (1) 当前这个硬币没有取，`dp[i][j]=dp[i-1][j]`;  
    (2) 当前这个硬币取了，`dp[i][j]=dp[i][j-coins[i]]`。  
    最后的结果是两者的和
3. 将状态转移方程翻译成代码，并处理边界条件

```Java
public int waysToChange2(int n) {
    int[] dp=new int[n+1];
    int[] coins={1,5,10,25};

    for(int i=0;i<=n;i++)
        dp[i]=1;

    for(int i=1;i<4;i++){
        for(int j=1;j<=n;j++){
            if(j>=coins[i])
                dp[j]=(dp[j]+dp[j-coins[i]])%1000000007;
        }
    }
    return dp[n];
}
```

**复杂度分析：**  

* 时间复杂度：$O(N)$，将方程化简以后时间复杂度为$O(4 \times (n + 1)) = O(n)$。
* 空间复杂度：$O(N)$，使用滚动数组思想优化后，只需要使用一个长度为 $n + 1$ 的一维数组，故渐进空间复杂度为 $O(n)$。

---
**解法二：数学**  
思路：  
该问题等价于求方程 $n = 25a + 10b + 5c + d$ 的非负整数解的数量。  
注意到 `25`, `10`, `5` 均为 `5` 的倍数，令 $n = 5m + k, 0 <= k <= 4$,  
得到：$5m = 25a + 10b + 5c + (d-k)$  
令 $e = (d-k)/5$，显然 `e` 必为整数，且与 `d` 一一对应。  
则原方程解的数量等于 $m = 5a + 2b + c + e$ 的解的数量, 记为 $F(m)$。

考虑 `a` 的取值。

* 当 `a = 0` 时，相当于求方程 $m = 2b + c + e$ 的非负整数解的数量。
* 若 `b = i`，则解数为 $(m - 2i + 1)$，因此，此时总的解数是对 $(m - 2i + 1)$ 从 `i = 0` 到 $[\frac{m}{2}]$ 求和。
（`[x]` 是取下整函数），该和为 $([m/2] + 1)([(m+1)/2] + 1)$；
* 当 `a > 0` 时，有 $a' = a - 1 >= 0$，从而解的数量等于 $m - 5 = 5a' + 2b + c + e$ 解的数量，即 $F(m - 5)$；
* 综上，$F(m) = F(m - 5) + ([m/2] + 1)([(m+1)/2] + 1)$。

有意思的是，只要定义 `m < 0` 时 $F(m) = 0$，该递推式对任意 `m >= 0` 都是成立的。

```Java
    public int waysToChange(int n) {
        n = (int) Math.floor(n / 5);
        long ans = 0;
        while (n >= 0) {
            ans = (ans + (long)(n/2+1)*((n+1)/2+1));
            n -= 5;
        }
        return (int) (ans % 1000000007);
    }
```

**复杂度分析：**

* 时间复杂度：$O(N)$，这里只使用了一重循环，循环的次数为 $\lfloor \frac{n}{25} \rfloor$，所以渐进时间复杂度为 $O(\lfloor \frac{n}{25} \rfloor) = O(n)$。  
* 空间复杂度：$O(1)$，没有使用辅助数组，只用了常数个临时变量（与问题规模 $n$ 无关），故渐进空间复杂度为 $O(1)$。
